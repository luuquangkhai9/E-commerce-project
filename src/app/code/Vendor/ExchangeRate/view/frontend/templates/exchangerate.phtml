<?php
/** @var \Vendor\ExchangeRate\Block\ExchangeRate $block */
$rates = $block->getRates();
$date = date('d/m/Y H:i:s');
?>
<div class="exchange-rate-container">
    <?php if ($rates): ?>
        <div class="exchange-rate">
            <h3>Tỷ giá Vietcombank</h3>
            <p>Cập nhật lúc: <?php echo $date; ?></p>
            <table id="exchange-rate-table">
                <thead>
                    <tr>
                        <th>Mã</th>
                        <th>Mua</th>
                        <th>Chuyển khoản</th>
                        <th>Bán</th>
                    </tr>
                </thead>
                <tbody>
                    <?php foreach ($rates as $code => $rate): ?>
                        <tr>
                            <td><?php echo $code; ?></td>
                            <td>
                                <?php
                                $buy = $rate['buy'];
                                if (is_numeric($buy)) {
                                    echo number_format($buy, 2, '.', ',');
                                } else {
                                    echo $buy;
                                }
                                ?>
                            </td>
                            <td>
                                <?php
                                $transfer = $rate['transfer'];
                                if (is_numeric($transfer)) {
                                    echo number_format($transfer, 2, '.', ',');
                                } else {
                                    echo $transfer;
                                }
                                ?>
                            </td>
                            <td>
                                <?php
                                $sell = $rate['sell'];
                                if (is_numeric($sell)) {
                                    echo number_format($sell, 2, '.', ',');
                                } else {
                                    echo $sell;
                                }
                                ?>
                            </td>
                        </tr>
                    <?php endforeach; ?>
                </tbody>
            </table>
        </div>
    <?php else: ?>
        <p>Không thể lấy dữ liệu tỷ giá.</p>
    <?php endif; ?>
</div>